<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Regex Tester â€” SmallTools</title>
  <link rel="stylesheet" href="../../assets/style.css">
  <style>
    .highlighted{background:#fef9c3;padding:14px;border:1.5px solid #fde68a;border-radius:7px;line-height:1.8;font-size:14px;min-height:80px;word-break:break-all;white-space:pre-wrap}
    .match-chip{display:inline-block;background:#fef08a;border:1px solid #fbbf24;border-radius:3px;padding:0 2px;cursor:pointer;font-weight:600}
    .flags-row{display:flex;gap:12px;flex-wrap:wrap}
    .flags-row label{display:flex;align-items:center;gap:5px;font-weight:400;font-size:13px;cursor:pointer}
    .match-list{margin-top:10px;font-family:monospace;font-size:13px}
    .match-item{background:var(--bg);border:1px solid var(--border);border-radius:5px;padding:5px 10px;margin-bottom:4px}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container"><a href="../../index.html" class="logo">Small<span>Tools</span></a></div>
  </header>
  <main class="tool-page">
    <div class="breadcrumb"><a href="../../index.html">Home</a> / <a href="../../index.html">Dev</a> / Regex Tester</div>
    <div class="tool-header">
      <h1><span>ðŸŽ¯</span> Regex Tester</h1>
      <p>Test regular expressions with live match highlighting.</p>
    </div>
    <div class="card">
      <div class="form-row">
        <label>Regular Expression</label>
        <div style="display:flex;gap:8px;align-items:center">
          <span style="font-size:18px;color:var(--text-2)">/</span>
          <input type="text" id="pattern" placeholder="(\w+)\s(\w+)" oninput="test()" style="flex:1">
          <span style="font-size:18px;color:var(--text-2)">/</span>
        </div>
      </div>
      <div class="flags-row" style="margin-bottom:14px">
        <label><input type="checkbox" id="fg" checked onchange="test()"> g (global)</label>
        <label><input type="checkbox" id="fi" onchange="test()"> i (case insensitive)</label>
        <label><input type="checkbox" id="fm" onchange="test()"> m (multiline)</label>
        <label><input type="checkbox" id="fs" onchange="test()"> s (dotAll)</label>
      </div>
      <div class="form-row"><label>Test String</label><textarea id="testStr" rows="5" placeholder="Enter text to test against..." oninput="test()">Hello World foo bar 123</textarea></div>
      <div id="err" style="font-size:13px;color:#dc2626;margin-bottom:6px"></div>
      <div id="info" style="font-size:13px;color:var(--text-2);margin-bottom:10px"></div>
      <label>Highlighted Matches</label>
      <div class="highlighted" id="highlighted"></div>
      <div id="matchList" class="match-list"></div>
    </div>
  </main>
  <script>
    function esc(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
    function test(){
      const pat=document.getElementById('pattern').value;
      const str=document.getElementById('testStr').value;
      document.getElementById('err').textContent='';
      document.getElementById('highlighted').textContent='';
      document.getElementById('matchList').innerHTML='';
      document.getElementById('info').textContent='';
      if(!pat){document.getElementById('highlighted').textContent=str;return;}
      try{
        let flags='';
        if(document.getElementById('fg').checked)flags+='g';
        if(document.getElementById('fi').checked)flags+='i';
        if(document.getElementById('fm').checked)flags+='m';
        if(document.getElementById('fs').checked)flags+='s';
        const re=new RegExp(pat,flags);
        const matches=[...str.matchAll(new RegExp(pat,flags.includes('g')?flags:flags+'g'))];
        document.getElementById('info').textContent=matches.length+' match(es) found';
        // Highlight
        let html='', last=0;
        matches.forEach(m=>{
          html+=esc(str.slice(last,m.index));
          html+=`<span class="match-chip" title="Match at index ${m.index}">${esc(m[0])}</span>`;
          last=m.index+m[0].length;
        });
        html+=esc(str.slice(last));
        document.getElementById('highlighted').innerHTML=html;
        // List
        const list=matches.map((m,i)=>`<div class="match-item"><strong>#${i+1}</strong> index:${m.index} &nbsp; "${esc(m[0])}"${m.length>1?' groups: ['+m.slice(1).map(g=>g===undefined?'<em>undefined</em>':'"'+esc(g)+'"').join(', ')+']':''}</div>`).join('');
        document.getElementById('matchList').innerHTML=list;
      }catch(e){document.getElementById('err').textContent='Regex error: '+e.message;}
    }
    test();
  </script>
</body>
</html>
